apiVersion: v1
kind: Pod
metadata:
  name: beaconchain-explorer
  labels:
    app: multinet
    tier: prysm
spec:
  containers:
    - name: explorer
      image: ubuntu
      imagePullPolicy: IfNotPresent
      command: [ "bash", "-c"]
      ports:
        - containerPort: 3333
          protocol: TCP
      args:
        - echo stands;
          sleep infinity
      # inject environment variables
      env:
        - name: MULTINET_POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: MULTINET_POD_IP
          valueFrom:
            fieldRef:
              fieldPath: status.podIP

    - name: db
      image: postgres:12.0
      imagePullPolicy: IfNotPresent
      command: [ "bash", "-c" ]
      ports:
        - containerPort: 5432
          protocol: TCP

      args:
        - echo stands;
          sleep infinity
      # inject environment variables
      env:
        - name: POSTGRES_DB
          value: "db"

        - name: POSTGRES_USER
          value: "postgres"

        - name: POSTGRES_PASSWORD
          value: "pass"

        - name: PGDATA
          value: "/postgresql/data"
